<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Twist Workshop</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 font-sans">

<div class="min-h-screen flex items-center justify-center p-4 md:p-8">
  <div class="w-full max-w-5xl bg-white rounded-3xl shadow-2xl p-8 md:p-16 text-center relative">

    <h1 class="text-4xl md:text-5xl font-black mb-4">The <span class="text-indigo-600 italic">Twist</span> Workshop</h1>

    <div id="scenario-text" class="text-xl text-slate-700 mb-2"></div>
    <div id="scenario-context" class="text-sm text-slate-400 mb-6"></div>

    <textarea id="answer" placeholder="Type your answer here..." class="w-full h-40 p-6 rounded-2xl border border-slate-300 focus:ring-2 focus:ring-indigo-400 mb-4 resize-none text-lg"></textarea>

    <button id="submitBtn" class="bg-indigo-600 text-white px-6 py-3 rounded-2xl font-bold hover:bg-indigo-700 transition mb-4">Submit</button>

    <div id="result" class="mt-6 text-center"></div>
    <button id="nextBtn" class="bg-slate-900 text-white px-6 py-3 rounded-2xl font-bold mt-4 hover:bg-slate-800 transition hidden"></button>

    <div id="progress" class="mt-6 font-bold text-slate-500"></div>
    <footer class="mt-8 text-sm text-slate-400">Created by Knowledge Team</footer>
  </div>
</div>

<script>
// ------------------- SCENARIOS -------------------
const scenarios = [
  {
    title:"The Interruptor",
    trigger:"You‚Äôre presenting an idea in a meeting. A colleague interrupts you (again) and says: 'This won‚Äôt work. We already tried something like this.'",
    context:"This is a classic challenge to your authority and expertise in a public setting."
  },
  {
    title:"The Last-Minute Pivot",
    trigger:"You deliver a piece of work on time. A colleague replies: 'Actually, we need to change the whole approach. Can you redo it for tomorrow?'",
    context:"This tests your boundaries and your ability to handle frustration regarding wasted effort."
  },
  {
    title:"The Blame Game",
    trigger:"A teammate messages you: 'Why is this late? This is blocking everyone.'",
    context:"A direct digital attack that can easily trigger a defensive or aggressive counter-message."
  },
  {
    title:"The Idea Thief",
    trigger:"In a meeting, a colleague presents your idea as theirs. The manager reacts positively.",
    context:"A high-stakes situation where your ego and professional recognition are at risk."
  },
  {
    title:"The Broken Record",
    trigger:"A colleague asks a question you feel you‚Äôve already answered multiple times. You think: 'We‚Äôve gone over this.'",
    context:"A test of patience and your ability to avoid sounding condescending."
  }
];

// ------------------- VARIABLES -------------------
let currentStep = 0;
let totalScore = 0;

const scenarioText = document.getElementById("scenario-text");
const scenarioContext = document.getElementById("scenario-context");
const resultDiv = document.getElementById("result");
const answerInput = document.getElementById("answer");
const submitBtn = document.getElementById("submitBtn");
const nextBtn = document.getElementById("nextBtn");
const progressDiv = document.getElementById("progress");

// ------------------- UPDATE SCENARIO -------------------
function updateScenario() {
  const sc = scenarios[currentStep];
  scenarioText.innerText = sc.trigger;
  scenarioContext.innerText = sc.context;
  progressDiv.innerText = `Scenario ${currentStep+1} of ${scenarios.length}`;
  answerInput.value = "";
  resultDiv.innerHTML = "";
  nextBtn.classList.add("hidden");
  submitBtn.disabled = false;

  // Update next button text
  nextBtn.innerText = currentStep === scenarios.length-1 ? "See Final Result üèÅ" : "Next Scenario";
}
updateScenario();

// ------------------- SMART SCORING -------------------
function evaluateAnswer(answer){
  const text = answer.toLowerCase();
  if(text.trim().length < 5 || text.match(/^(bla|test|asdf|123)+$/i)) return 40;

  const negative = ["shit","stupid","idiot","hate","useless","bad","ridiculous","angry","dumb","stop"];
  const empathy   = ["please","thank","suggest","could","might","recommend","appreciate","understand","support"];
  const positive  = ["great","awesome","love","happy","fun","cheers","haha","delighted","excited","celebrate","coffee","together","lol"];
  const neutral   = ["ok","fine","noted","understood","yes","no","this","i‚Äôm","the","whatever"];

  const containsAny = (list) => list.some(w => text.includes(w));

  if(containsAny(negative)) return 20;
  if(containsAny(positive)) return 100;
  if(containsAny(empathy)) return 80;
  if(containsAny(neutral)) return 60;
  return 40;
}

function getTip(score){
  switch(score){
    case 20: return "Your response is aggressive. Stay calm and polite.";
    case 40: return "Polite but could be more helpful. Avoid nonsense answers.";
    case 60: return "Neutral response. Aim to add empathy or constructive suggestions.";
    case 80: return "Good empathy! Try to add humor or warmth for maximum effect.";
    case 100: return "Excellent! You turned the situation into a bonding moment.";
  }
}

function getBadge(totalScore){
  if(totalScore < 200) return {name:"The Chaos Apprentice", emoji:"üß®", msg:"You brought‚Ä¶ energy. Let‚Äôs channel it before HR gets involved."};
  if(totalScore < 300) return {name:"The Polite Survivor", emoji:"üò¨", msg:"You survived the meeting, but feelings were injured along the way."};
  if(totalScore < 400) return {name:"The Diplomatic Wizard", emoji:"üßô‚Äç‚ôÇÔ∏è", msg:"You navigated tension like a pro. Gandalf would approve."};
  if(totalScore < 450) return {name:"The Emotional Alchemist", emoji:"üß™", msg:"You turned friction into progress. That‚Äôs rare. And impressive."};
  return {name:"Master of The Twist", emoji:"ü¶Ñ‚ú®", msg:"Conflict? What conflict? You made people smile while disagreeing."};
}

// ------------------- BUTTON EVENTS -------------------
submitBtn.addEventListener("click", () => {
  const answer = answerInput.value.trim();
  if(!answer) return alert("Type your answer");

  const score = evaluateAnswer(answer);
  const tip = getTip(score);
  totalScore += score;

  const color = score === 20 ? "bg-red-500" :
                score === 40 ? "bg-yellow-500" :
                score === 60 ? "bg-blue-500" :
                score === 80 ? "bg-green-500" :
                "bg-pink-500";

  resultDiv.innerHTML = `<div class="p-4 rounded-xl text-white font-bold ${color}">
    Score: ${score}<br>Tip: ${tip}
  </div>`;

  nextBtn.classList.remove("hidden");
  submitBtn.disabled = true;
});

nextBtn.addEventListener("click", () => {
  if(currentStep < scenarios.length-1){
    currentStep++;
    updateScenario();
  } else {
    // Final screen
    scenarioText.innerHTML = "";
    scenarioContext.innerHTML = "";
    answerInput.style.display = "none";
    submitBtn.style.display = "none";
    nextBtn.style.display = "none";

    const badge = getBadge(totalScore);
    resultDiv.innerHTML = `
      <div class="p-8 bg-indigo-600 text-white rounded-3xl">
        <div class="text-6xl mb-4">${badge.emoji}</div>
        <div class="text-3xl font-bold mb-2">${badge.name}</div>
        <div class="text-lg italic">${badge.msg}</div>
        <div class="mt-4 font-bold text-xl">Total Score: ${totalScore}</div>
      </div>
    `;
  }
});
</script>
</body>
</html>
